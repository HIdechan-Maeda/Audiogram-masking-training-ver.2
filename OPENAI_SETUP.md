# OpenAI APIキーの設定方法

## 概要

OpenAI APIキーを設定することで、AI症例生成機能がより自然で教育的な症例情報を生成できるようになります。

## ステップ1: OpenAI APIキーの取得

1. **OpenAIのWebサイトにアクセス**
   - https://platform.openai.com/ にアクセス

2. **アカウントの作成またはログイン**
   - アカウントがない場合は新規登録
   - 既存アカウントがある場合はログイン

3. **APIキーの作成**
   - ログイン後、左側のメニューから「API Keys」を選択
   - 「Create new secret key」をクリック
   - キー名を入力（例：HearSim Development）
   - 「Create secret key」をクリック
   - **重要**: 表示されたキーをコピー（この画面を閉じると再表示できません）

## ステップ2: プロジェクトへの設定

1. **`.env`ファイルの作成**
   - プロジェクトルート（`package.json`がある場所）に`.env`ファイルを作成

2. **APIキーを設定**
   - `.env`ファイルに以下を追加：
   ```
   REACT_APP_OPENAI_API_KEY=あなたのAPIキーをここに貼り付け
   ```
   
   例：
   ```
   REACT_APP_OPENAI_API_KEY=sk-1234567890abcdefghijklmnopqrstuvwxyz
   ```

3. **開発サーバーの再起動**
   - `.env`ファイルを変更した場合は、開発サーバーを再起動する必要があります
   ```bash
   npm start
   ```

## 注意事項

### セキュリティ
- **`.env`ファイルはGitにコミットしないでください**
  - `.gitignore`に`.env`が含まれていることを確認
  - APIキーは機密情報です
  - 他人に共有しないでください

### コスト
- OpenAI APIの使用には料金がかかります
- `gpt-4o-mini`を使用していますが、使用量に応じて課金されます
- 料金は https://openai.com/pricing で確認できます
- 無料枠がある場合もありますが、利用規約を確認してください

### 動作確認
- APIキーを設定すると、AI症例生成時に「学習ポイント（AI生成）」が表示されます
- エラーが発生した場合は、ブラウザのコンソールで確認してください
- APIキーが正しく設定されていない場合は、従来のアルゴリズムベースの生成に自動的にフォールバックします

## トラブルシューティング

### APIキーが認識されない
- `.env`ファイルがプロジェクトルートにあることを確認
- ファイル名が`.env`（先頭にドット）であることを確認
- 開発サーバーを再起動してください

### エラーメッセージが表示される
- APIキーが正しいか確認
- インターネット接続を確認
- OpenAIのアカウントにクレジットが残っているか確認

### APIキーを設定しない場合
- APIキーを設定しなくても、アプリケーションは正常に動作します
- 従来のアルゴリズムベースの症例生成が使用されます
- 機能的な違いはありませんが、生成されるテキストがより自然になります


