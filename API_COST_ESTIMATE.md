# OpenAI API使用料金の目安

## 重要なポイント

**ChatGPT Plus（月額20ドル）とAPI使用料は別々に課金されます**

- ChatGPT Plus = ChatGPTのWebインターフェースでの使用（月額固定）
- API使用料 = プログラムからAPIを呼び出す場合の従量課金（別途発生）

## 現在の実装での料金

### 使用モデル
- **gpt-4o-mini**（コスト効率重視のモデル）

### 料金（2024年時点の目安）
- **入力トークン**: $0.15 / 1M tokens（100万トークンあたり約0.15ドル）
- **出力トークン**: $0.60 / 1M tokens（100万トークンあたり約0.60ドル）

### 1回の症例生成あたりのコスト

1回の症例生成で送信されるデータ：
- プロンプト: 約500-800トークン
- レスポンス: 約200-300トークン（max_tokens: 500に設定）

**概算**: 1回あたり約 **$0.0001 - $0.0003**（約0.01-0.03円）

### 月間使用量の目安

- **症例生成100回**: 約$0.01-0.03（約1-3円）
- **症例生成1,000回**: 約$0.10-0.30（約10-30円）
- **症例生成10,000回**: 約$1-3（約100-300円）

## コスト削減のポイント

1. **gpt-4o-miniを使用**（既に実装済み）
   - GPT-4より約10-20倍安価
   
2. **max_tokensを500に制限**（既に実装済み）
   - 必要最小限の出力に制限

3. **APIキーが設定されていない場合は自動フォールバック**
   - 従来のアルゴリズムを使用（API使用料なし）

## 料金の確認方法

1. **OpenAI Platformで確認**
   - https://platform.openai.com/usage にアクセス
   - 使用量と料金を確認

2. **クレジット残高の確認**
   - https://platform.openai.com/account/billing
   - 残高と使用状況を確認

## 推奨設定

### 開発・テスト環境
- APIキーを設定して動作確認
- 少量の使用でテスト

### 本番環境（教育機関向け）
- **オプション1**: APIキーを設定して高品質な症例生成
  - コスト: 月間数百円〜数千円程度（使用量による）
- **オプション2**: APIキーを設定しない
  - コスト: 無料
  - 従来のアルゴリズムベースの生成を使用

## 注意事項

1. **API使用には別途クレジットが必要**
   - 初回登録時に無料クレジットが付与される場合があります
   - その後は従量課金

2. **使用量に注意**
   - 大量に使用すると料金が発生します
   - 使用量を定期的に確認することを推奨

3. **無料枠の確認**
   - アカウントによっては無料枠がある場合があります
   - OpenAIの公式サイトで確認

## 結論

- **症例生成は非常に低コスト**（1回あたり約0.01-0.03円）
- **教育用途での使用であれば、月間数百円程度**で十分
- **APIキーを設定しない場合も、従来のアルゴリズムで無料で動作**


