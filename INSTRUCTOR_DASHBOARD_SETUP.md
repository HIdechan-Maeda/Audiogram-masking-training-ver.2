# 講師用ダッシュボード セットアップガイド

## 概要

2名の講師が使用できる講師用ダッシュボードを実装しました。学生の進捗状況を一覧で確認し、成績管理や分析ができます。

## セットアップ手順

### 1. Supabaseテーブルの作成

1. [Supabase Dashboard](https://app.supabase.com/) にログイン
2. プロジェクトを選択
3. 左メニューから「SQL Editor」を選択
4. `instructor_setup.sql` の内容をコピー＆ペースト
5. 「Run」ボタンをクリックして実行

### 2. 初期講師アカウント

以下の2つのアカウントが作成されます：

| 講師ID | パスワード | 名前 |
|--------|-----------|------|
| instructor01 | password01 | 講師1 |
| instructor02 | password02 | 講師2 |

**重要**: 本番環境では、パスワードをbcryptなどでハッシュ化してください。

### 3. アクセス方法

講師用ダッシュボードにアクセスするには、URLに `?mode=instructor` を追加します：

```
http://localhost:3000/?mode=instructor
```

または本番環境の場合：
```
https://your-domain.com/?mode=instructor
```

## 機能説明

### 1. ログイン画面

- 講師IDとパスワードを入力してログイン
- ログイン状態はローカルストレージに保存されます

### 2. ダッシュボード画面

#### 全体統計カード
- **総学生数**: 登録されている学生の総数
- **アクティブ学生数**: 過去7日以内にログインした学生数
- **平均精度**: 全学生の平均精度
- **完了症例数**: 全学生の完了症例数の合計
- **本日の活動**: 本日のログイン数

#### 学生一覧テーブル
- 学生ID、完了症例数、平均精度、総セッション数、最終ログイン日時を表示
- 各学生の詳細情報を確認可能
- 進捗データのリセットが可能

#### 検索機能
- 学生IDで検索可能

#### CSVエクスポート
- 全学生の進捗データをCSV形式でエクスポート
- Excelで開ける形式

### 3. 学生詳細モーダル

学生をクリックすると、以下の情報が表示されます：
- 基本情報（登録日、最終ログイン日時）
- 進捗サマリー（総セッション数、完了症例数、最終セッション日時）
- 症例別進捗（各症例の精度、正答数、完了日時）

## 使用方法

### 講師の1日の流れ

1. **朝**: ダッシュボードにログイン
   - URLに `?mode=instructor` を追加してアクセス
   - 講師IDとパスワードでログイン

2. **授業前**: 学生の進捗状況を確認
   - 全体統計で全体像を把握
   - 学生一覧で個別の進捗を確認

3. **授業中**: リアルタイムで進捗を確認（オプション）
   - 「更新」ボタンで最新データを取得
   - 自動更新は30秒ごと

4. **授業後**: 詳細な分析とCSVエクスポート
   - 学生詳細モーダルで詳細を確認
   - CSVエクスポートで成績を保存

### よくある操作

#### 学生の進捗をリセットする
1. 学生一覧テーブルで「リセット」ボタンをクリック
2. 確認ダイアログで「OK」をクリック

#### CSVをエクスポートする
1. 「CSV出力」ボタンをクリック
2. ファイルが自動的にダウンロードされます

#### 学生を検索する
1. 検索バーに学生IDを入力
2. 自動的にフィルタリングされます

## セキュリティに関する注意

### 現在の実装
- パスワードは平文で保存されています（簡易実装）
- ローカルストレージにセッション情報を保存

### 本番環境での推奨事項
1. **パスワードのハッシュ化**: bcryptなどでパスワードをハッシュ化
2. **HTTPSの使用**: 通信を暗号化
3. **セッション管理**: Supabase Authを使用したセッション管理
4. **RLSポリシーの強化**: 講師のみがデータにアクセスできるように設定

## トラブルシューティング

### ログインできない場合
1. Supabaseの`instructors`テーブルが作成されているか確認
2. 講師アカウントが正しく作成されているか確認
3. ブラウザのコンソールでエラーメッセージを確認

### 学生データが表示されない場合
1. `students`テーブルと`student_progress`テーブルが作成されているか確認
2. 学生がログインして進捗データが保存されているか確認
3. 「更新」ボタンをクリックしてデータを再読み込み

### CSVエクスポートが動作しない場合
1. ブラウザのポップアップブロッカーを確認
2. ブラウザのコンソールでエラーメッセージを確認

## 今後の拡張案

1. **パスワード変更機能**: 講師がパスワードを変更できる
2. **詳細な分析グラフ**: 症例別の正答率分布、時間別のトレンド
3. **通知機能**: 学生の進捗が一定基準を超えたら通知
4. **バルク操作**: 複数の学生の進捗を一括でリセット
5. **レポート機能**: 週次・月次のレポートを自動生成

---

**作成日**: 2024年1月
**対象**: 2名の講師による実証実験

